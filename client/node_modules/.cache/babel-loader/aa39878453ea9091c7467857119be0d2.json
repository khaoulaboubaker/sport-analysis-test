{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\khaoula\\\\videoServer\\\\client\\\\src\\\\components\\\\VideoPlayer\\\\VideoPlayer.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport videojs from 'video.js';\nimport './videojs.css';\nimport Navbar from '../Navbar/Navbar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass VideoPlayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: false,\n      videoJsOptions: null\n    };\n  }\n\n  componentDidMount() {\n    axios.get('http://127.0.0.1:3333/api/videoList', {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('userTokenTime')).token\n      }\n    }).then(res => {\n      res.data.map(video => {\n        if (video.upload_title === this.props.match.params.videoTitle) {\n          this.setState({\n            loaded: true,\n            videoJsOptions: {\n              autoplay: false,\n              controls: true,\n              sources: [{\n                src: video.video_path\n              }]\n            }\n          }, () => {\n            this.player = videojs(this.videoNode, this.state.videoJsOptions, function onPlayerReady() {// console.log('onPlayerReady', this)\n            });\n          });\n        }\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.player) {\n      this.player.dispose();\n    }\n  }\n\n  render() {\n    if (!localStorage.getItem('userTokenTime')) return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/signIn\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 56\n    }, this);\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        style: {\n          width: \"100vw\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xs-12 col-sm-12 col-md-10 col-lg-8 mx-auto mt-5\",\n          children: this.state.loaded ? /*#__PURE__*/_jsxDEV(\"div\", {\n            \"data-vjs-player\": true,\n            children: /*#__PURE__*/_jsxDEV(\"video\", {\n              ref: node => this.videoNode = node,\n              className: \"video-js vjs-big-play-centered\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 15\n          }, this) : ' Loading ... '\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default VideoPlayer;","map":{"version":3,"names":["React","axios","Redirect","videojs","Navbar","VideoPlayer","Component","constructor","props","state","loaded","videoJsOptions","componentDidMount","get","headers","JSON","parse","localStorage","getItem","token","then","res","data","map","video","upload_title","match","params","videoTitle","setState","autoplay","controls","sources","src","video_path","player","videoNode","onPlayerReady","componentWillUnmount","dispose","render","width","node"],"sources":["C:/Users/khaoula/videoServer/client/src/components/VideoPlayer/VideoPlayer.js"],"sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport videojs from 'video.js';\r\nimport './videojs.css';\r\nimport Navbar from '../Navbar/Navbar';\r\n\r\nclass VideoPlayer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loaded: false,\r\n      videoJsOptions: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.get('http://127.0.0.1:3333/api/videoList', {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('userTokenTime')).token\r\n      }\r\n    }).then(res => {\r\n      res.data.map(video => {\r\n        if (video.upload_title === this.props.match.params.videoTitle) {\r\n          this.setState({\r\n            loaded: true,\r\n            videoJsOptions: {\r\n              autoplay: false,\r\n              controls: true,\r\n              sources: [{\r\n                src: video.video_path\r\n              }]\r\n            }\r\n          }, () => {\r\n            this.player = videojs(this.videoNode, this.state.videoJsOptions, function onPlayerReady() {\r\n              // console.log('onPlayerReady', this)\r\n            });\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.player) {\r\n      this.player.dispose()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!localStorage.getItem('userTokenTime')) return <Redirect to=\"/signIn\" />\r\n    return (\r\n      <React.Fragment>\r\n        <Navbar />\r\n        <div className=\"row\" style={{ width: \"100vw\" }}>\r\n          <div className=\"col-xs-12 col-sm-12 col-md-10 col-lg-8 mx-auto mt-5\">\r\n            {this.state.loaded ? (\r\n              <div data-vjs-player>\r\n                <video ref={node => this.videoNode = node} className=\"video-js vjs-big-play-centered\" />\r\n              </div>\r\n            ) : ' Loading ... '}\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default VideoPlayer;\r\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAEA,OAAOC,OAAP,MAAoB,UAApB;AACA,OAAO,eAAP;AACA,OAAOC,MAAP,MAAmB,kBAAnB;;;AAEA,MAAMC,WAAN,SAA0BL,KAAK,CAACM,SAAhC,CAA0C;EACxCC,WAAW,CAACC,KAAD,EAAQ;IACjB,MAAMA,KAAN;IACA,KAAKC,KAAL,GAAa;MACXC,MAAM,EAAE,KADG;MAEXC,cAAc,EAAE;IAFL,CAAb;EAID;;EAEDC,iBAAiB,GAAG;IAClBX,KAAK,CAACY,GAAN,CAAU,qCAAV,EAAiD;MAC/CC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEP,iBAAiB,YAAYC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,EAAkDC;MAFxE;IADsC,CAAjD,EAKGC,IALH,CAKQC,GAAG,IAAI;MACbA,GAAG,CAACC,IAAJ,CAASC,GAAT,CAAaC,KAAK,IAAI;QACpB,IAAIA,KAAK,CAACC,YAAN,KAAuB,KAAKjB,KAAL,CAAWkB,KAAX,CAAiBC,MAAjB,CAAwBC,UAAnD,EAA+D;UAC7D,KAAKC,QAAL,CAAc;YACZnB,MAAM,EAAE,IADI;YAEZC,cAAc,EAAE;cACdmB,QAAQ,EAAE,KADI;cAEdC,QAAQ,EAAE,IAFI;cAGdC,OAAO,EAAE,CAAC;gBACRC,GAAG,EAAET,KAAK,CAACU;cADH,CAAD;YAHK;UAFJ,CAAd,EASG,MAAM;YACP,KAAKC,MAAL,GAAchC,OAAO,CAAC,KAAKiC,SAAN,EAAiB,KAAK3B,KAAL,CAAWE,cAA5B,EAA4C,SAAS0B,aAAT,GAAyB,CACxF;YACD,CAFoB,CAArB;UAGD,CAbD;QAcD;MACF,CAjBD;IAkBD,CAxBD;EAyBD;;EAEDC,oBAAoB,GAAG;IACrB,IAAI,KAAKH,MAAT,EAAiB;MACf,KAAKA,MAAL,CAAYI,OAAZ;IACD;EACF;;EAEDC,MAAM,GAAG;IACP,IAAI,CAACvB,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAL,EAA4C,oBAAO,QAAC,QAAD;MAAU,EAAE,EAAC;IAAb;MAAA;MAAA;MAAA;IAAA,QAAP;IAC5C,oBACE,QAAC,KAAD,CAAO,QAAP;MAAA,wBACE,QAAC,MAAD;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAK,SAAS,EAAC,KAAf;QAAqB,KAAK,EAAE;UAAEuB,KAAK,EAAE;QAAT,CAA5B;QAAA,uBACE;UAAK,SAAS,EAAC,qDAAf;UAAA,UACG,KAAKhC,KAAL,CAAWC,MAAX,gBACC;YAAK,uBAAL;YAAA,uBACE;cAAO,GAAG,EAAEgC,IAAI,IAAI,KAAKN,SAAL,GAAiBM,IAArC;cAA2C,SAAS,EAAC;YAArD;cAAA;cAAA;cAAA;YAAA;UADF;YAAA;YAAA;YAAA;UAAA,QADD,GAIG;QALN;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAcD;;AA3DuC;;AA8D1C,eAAerC,WAAf"},"metadata":{},"sourceType":"module"}